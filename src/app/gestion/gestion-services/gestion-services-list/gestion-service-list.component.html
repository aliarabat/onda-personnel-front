<!--FORM DATA-->
<br>
<div class="col-md-12 row justify-content-between">
  <form class="col-md-10">
    <div class="form-row align-items-center">
      <div class="col-md-2">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">Année</div>
          </div>
          <input type="number" name="annee" id="annee" min="0" max="{{ date() }}" [(ngModel)]="dateByYear.year" class="form-control" placeholder="Annee">
        </div>
      </div>
      <div [hidden]="hiddenStateMonth" id="monthDiv" class="col-md-2">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">Mois</div>
          </div>
          <input type="number" [(ngModel)]="dateByYear.month" name="mois" id="mois" min="0" max="31" class="form-control" placeholder="Mois">
        </div>
      </div>
      <div [hidden]="hiddenState" id="employeeDiv" class="col-md-4">
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text">Employée</div>
          </div>
          <select class="custom-select" id="inputGroupSelectEmployee" [(ngModel)]="employee.matricule" name="employeematricule">
            <option selected disabled>Selectionner un employe</option>
            <option *ngFor="let emp of employeeVo" value="{{ emp.matricule }}">{{ emp.matricule+" ("+emp.firstName+" "+emp.lastName+")" }}</option>
          </select>
        </div>
      </div>
      <div class="col-md-3 justify-content-between">
        <button (click)="findWorkByYear()" type="submit" class="btn btn-outline-success mr-sm-1">Chercher</button>
        <button (click)="reinitializeForm()" type="button" class="btn btn-outline-secondary">Réinitialiser</button>
      </div>
    </div>
  </form>

  <!-- Default unchecked -->
  <div class="d-flex flex-column">
    <div class="custom-control custom-checkbox">
      <input type="checkbox" class="custom-control-input" value="option1" (click)="selectPerYear()" id="inlineCheckboxperyear">
      <label class="custom-control-label" for="inlineCheckboxperyear">Recherche par employé</label>
    </div>
    <div class="custom-control custom-checkbox">
      <input type="checkbox" class="custom-control-input" value="option1" (click)="selectPerMonth()" id="inlineCheckboxpermonth">
      <label class="custom-control-label" for="inlineCheckboxpermonth">Recherche par mois</label>
    </div>
  </div>
</div>
<br>
<table class="table table-striped table-sm">
  <thead>
  <tr>
    <th scope="col">Matricule</th>
    <th scope="col">Année</th>
    <th scope="col">Nom</th>
    <th scope="col">Prénom</th>
    <th scope="col">Mois</th>
    <th scope="col">Pan</th>
    <th scope="col">Hjf</th>
    <th scope="col">Hn</th>
    <th scope="col">Actions</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let w of listEmployeesByYear">
    <th scope="row">{{ w.employeeVo.matricule }}</th>
    <td>{{ formatDate(w.workDetailVo.workDetailDate).getFullYear() }}</td>
    <td>{{ w.employeeVo.lastName}}</td>
    <td>{{ w.employeeVo.firstName}}</td>
    <td >{{ formatDate(w.workDetailVo.workDetailDate).getMonth()+1}}</td>
    <td>{{ w.workDetailVo.pan }}</td>
    <td>{{ w.workDetailVo.hjf.hour+"h"+w.workDetailVo.hjf.minute+"min" }}</td>
    <td>{{ w.workDetailVo.hn.hour+"h"+w.workDetailVo.hn.minute+"min" }}</td>
    <td>
      <button type="button" (click)="setDaysInfo(w.workDetailVo.daysVo)" class="btn btn-outline-primary mr-sm-1" data-toggle="modal" data-target=".bd-example-modal-lg">Afficher</button>
      <button type="button" (click)="setSelectedWork(w.workDetailVo)" class="btn btn-outline-warning ml-sm-1" data-toggle="modal" data-target="#exampleModal" data-whatever="@fat">Modifier</button>
    </td>
  </tr>
  </tbody>
</table>
<!--Large Modal-->
<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="container-fluid">
        <div class="row col-md-10 offset-1">
          <table class="table table-hover table-sm">
            <thead>
            <tr class="text-center">
              <th scope="col">Date</th>
              <th scope="col">Etat</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngIf="selectedDaysFormModal.length===0">
              <div class="text-center font-italic" aria-colspan="2">No items found</div>
            </tr>
            <tr *ngFor="let day of selectedDaysFormModal">
              <td>{{ day.dayDate }}</td>
              <td>
                <div *ngIf="day.vacationVo!==null">
                  {{ day.vacationVo.type }}
                </div>
                <div class="d-flex" *ngIf="day.vacationVo===null">
                  <div *ngFor="let dt of day.dayDetailsVo">
                    <div class="mr-sm-1" *ngIf="dt.missionVo!=null">{{ dt.missionVo.type }}</div>
                    <div class="mr-sm-1" *ngIf="dt.skipVo!=null">{{ dt.skipVo.type }}</div>
                    <div class="mr-sm-1" *ngIf="dt.replacementVo!=null">{{ dt.replacementVo.reference }}</div>
                    <div class="mr-sm-1" *ngIf="dt.missionVo===null && dt.skipVo===null && dt.replacementVo===null">
                      {{ dt.detailVo.wording }}
                    </div>
                  </div>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

















<!--Modal-->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Modification</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form >
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text">Pan</span>
              </div>
              <input type="number" [(ngModel)]="workDetailVoToUpdate.pan" placeholder="Pan" name="pan" value="{{!!selectdedWork?selectdedWork.pan:null}}" min="0" class="form-control">
            </div>
          </div>
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text">Hjf</span>
              </div>
              <input type="number" [(ngModel)]="workDetailVoToUpdate.hjf.hour" name="hjfhour"  value="{{!!selectdedWork?selectdedWork.hjf.hour:null}}" class="form-control" placeholder="heure" min="0" max="23">
              <div class="input-group-append">
                <span class="input-group-text">H</span>
              </div>
              <input type="number" [(ngModel)]="workDetailVoToUpdate.hjf.minute" name="hjfminute"  value="{{!!selectdedWork?selectdedWork.hjf.minute:null}}" class="form-control" placeholder="min" min="0" max="59">
              <div class="input-group-append">
                <span class="input-group-text">M</span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text">Hn</span>
              </div>
              <input type="number" name="hnhour" [(ngModel)]="workDetailVoToUpdate.hn.hour"  value="{{ !!selectdedWork?selectdedWork.hn.hour:null }}" class="form-control" placeholder="heure" min="0" max="23">
              <div class="input-group-append">
                <span class="input-group-text">H</span>
              </div>
              <input type="number" name="hnminute" [(ngModel)]="workDetailVoToUpdate.hn.minute"  value="{{ !!selectdedWork?selectdedWork.hn.minute:null }}" class="form-control" placeholder="min" min="0" max="59">
              <div class="input-group-append">
                <span class="input-group-text">M</span>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" (click)="update()" class="btn btn-primary">Modifier</button>
      </div>
    </div>
  </div>
</div>
